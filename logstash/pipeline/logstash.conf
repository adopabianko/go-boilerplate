input {
  udp {
    port => 50000
    codec => json
  }
}

filter {
  # Extract trace context fields for Kibana log-trace correlation
  if [trace.id] {
    mutate {
      rename => { "[trace.id]" => "trace_id" }
    }
  }
  if [transaction.id] {
    mutate {
      rename => { "[transaction.id]" => "transaction_id" }
    }
  }
  if [span.id] {
    mutate {
      rename => { "[span.id]" => "span_id" }
    }
  }
}

output {
  elasticsearch {
    hosts => ["elasticsearch:9200"]
    index => "go-boilerplate-logs-%{+YYYY.MM.dd}"
  }
  stdout { codec => rubydebug }
}

